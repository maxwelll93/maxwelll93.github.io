<!DOCTYPE html>
<html>
<head>
  <title>Drag and Drop Image</title>
  <meta name="description" content="Drag and drop image functionality with reverse/mirror feature.">
  <meta name="keywords" content="drag and drop, image, reverse, mirror, HTML, CSS, JavaScript, free">
  <meta name="author" content="Max">
  <meta name="robots" content="index, follow">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f1f1f1;
    }
    
    #drop-zone {
      width: 400px;
      height: 400px;
      border: 2px dashed #ccc;
      border-radius: 10px;
      text-align: center;
      padding: 20px;
      font-size: 18px;
      margin: 50px auto;
      background-color: #ffffff;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }
    
    #image-preview {
      max-width: 100%;
      max-height: 100%;
      display: none;
    }
    #reverse-button-container {
      text-align: center;
      margin-top: 20px;
    }
    #reverse-button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 999;
      display: none;
    }

    #loading-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 24px;
      text-align: center;
    }
    
  </style>
</head>
<body>
    <div id="drop-zone">
        <span>Drag and drop an image here</span>
        <img id="image-preview" src="" alt="Image Preview">
    </div>
    <div id="reverse-button-container">
        <button id="reverse-button">Reverse/Mirror Image</button>
    </div>
    <div id="overlay">
        <div id="loading-text">Reversing Image...</div>
    </div>

  <script>
    var dropZone = document.getElementById('drop-zone');
    var imagePreview = document.getElementById('image-preview');
    var reverseButton = document.getElementById('reverse-button');
    var overlay = document.getElementById('overlay');
    
    reverseButton.disabled = true;

    dropZone.addEventListener('dragover', handleDragOver, false);
    dropZone.addEventListener('dragleave', handleDragLeave, false);
    dropZone.addEventListener('drop', handleFileSelect, false);
    reverseButton.addEventListener('click', reverseImage, false);

    
    function handleDragOver(event) {
        event.preventDefault();
        event.dataTransfer.dropEffect = 'copy';
        dropZone.classList.add('dragover');
    }

    function handleDragLeave(event) {
        event.preventDefault();
        dropZone.classList.remove('dragover');
    }

    function handleFileSelect(event) {
        showOverlay("Displaying Image...");
        event.preventDefault();
        dropZone.classList.remove('dragover');
        var files = event.dataTransfer.files;

        if (files.length > 0) {
            var file = files[0];
            var fileReader = new FileReader();

            fileReader.onload = function(event) {
                imagePreview.src = event.target.result;
                imagePreview.style.display = 'block';
                hideOverlay();
                reverseButton.disabled = false;
            };

            fileReader.readAsDataURL(file);
        }
    }
    
    function reverseImage() {
        disableFunctions();
        showOverlay("Reversing Image...");
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');
        var img = new Image();
        img.src = imagePreview.src;
        
        img.onload = function() {
            canvas.width = img.width;
            canvas.height = img.height;
            
            ctx.translate(canvas.width, 0);
            ctx.scale(-1, 1);
            ctx.drawImage(img, 0, 0);
            
            imagePreview.src = canvas.toDataURL();
            enableFunctions();
            hideOverlay();
        };

    }

    function disableFunctions() {
      dropZone.removeEventListener('dragover', handleDragOver);
      dropZone.removeEventListener('dragleave', handleDragLeave);
      dropZone.removeEventListener('drop', handleFileSelect);
      reverseButton.removeEventListener('click', reverseImage);
    }

    function enableFunctions() {
      dropZone.addEventListener('dragover', handleDragOver, false);
      dropZone.addEventListener('dragleave', handleDragLeave, false);
      dropZone.addEventListener('drop', handleFileSelect, false);
      reverseButton.addEventListener('click', reverseImage, false);
    }
    function showOverlay(info) {
        $('#loading-text').html(info); 
        overlay.style.display = 'block';
    }

    function hideOverlay() {
      overlay.style.display = 'none';
    }
    
  </script>
</body>
</html>
